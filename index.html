<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ZanDKav - Asisten AI Anda</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0a192f;
            color: #ccd6f6;
            margin: 0;
            padding: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="%23ffffff" opacity="0.7"><animate attributeName="r" values="1;2;1" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.7;1;0.7" dur="4s" repeatCount="indefinite"/></circle><circle cx="50" cy="50" r="1.5" fill="%23ffffff" opacity="0.8"><animate attributeName="r" values="1.5;2.5;1.5" dur="4s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;1;0.8" dur="5s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="1" fill="%23ffffff" opacity="0.6"><animate attributeName="r" values="1;1.8;1" dur="5s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.6;0.9;0.6" dur="3s" repeatCount="indefinite"/></circle></svg>');
            background-size: 200px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
        }
        
        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #64ffda, #3aafa9);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .zandkav {
            color: #9d4edd;
            font-weight: 600;
            display: inline-block;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .description {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            color: #8892b0;
        }
        
        .btn {
            background: linear-gradient(45deg, #9d4edd, #7b2cbf);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(157, 78, 221, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .chat-container {
            display: none;
            background-color: #112240;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #233554;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 1rem;
            text-align: left;
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .user-message {
            background-color: #233554;
            margin-left: auto;
        }
        
        .ai-message {
            background-color: #1e3a8a;
            margin-right: auto;
        }
        
        .chat-input {
            display: flex;
            margin-top: 1rem;
        }
        
        .chat-input input {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 50px 0 0 50px;
            background-color: #233554;
            color: white;
            outline: none;
        }
        
        .chat-input button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 0 50px 50px 0;
            background-color: #9d4edd;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .chat-input button:hover {
            background-color: #7b2cbf;
        }
        
        .chat-input button:disabled {
            background-color: #5a189a;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            display: none;
            color: #64ffda;
            font-style: italic;
        }
        
        .error-message {
            color: #ff6b6b;
            margin-top: 0.5rem;
            text-align: center;
            display: none;
        }
        
        .clear-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            margin-top: 1rem;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .clear-btn:hover {
            background-color: #ff4757;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Selamat Datang Di Web AI <span class="zandkav">ZanDKav</span></h1>
        <p class="description">
            AI ZanDKav adalah asisten virtual cerdas yang siap membantu Anda 24/7. 
            Dengan kecerdasan buatan tingkat tinggi berbasis DeepSeek AI, saya dapat menjawab pertanyaan, 
            memberikan saran, membantu dalam pekerjaan, dan menjadi teman bicara yang informatif. 
            Cobalah bertanya apa saja!
        </p>
        <button class="btn" id="startBtn">Mulai Chat dengan AI ZanDKav</button>
        
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <h3>AI ZanDKav (DeepSeek AI)</h3>
                <span class="typing-indicator" id="typingIndicator">Mengetik...</span>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    Halo! Saya AI ZanDKav yang didukung oleh DeepSeek AI. Bagaimana saya bisa membantu Anda hari ini?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="userInput" placeholder="Ketik pesan Anda..." autocomplete="off">
                <button id="sendBtn">Kirim</button>
            </div>
            <div class="error-message" id="errorMessage"></div>
            <button class="clear-btn" id="clearBtn">Bersihkan Percakapan</button>
        </div>
    </div>

    <script>
        // API Configuration
        const API_KEY = 'sk-33591c940eba48afa01842cdfd747996';
        const API_URL = 'https://api.deepseek.com/v1/chat/completions';
        
        // Conversation history
        let conversationHistory = [
            {
                role: "system",
                content: "Anda adalah AI ZanDKav, asisten AI yang ramah dan membantu. Gunakan bahasa Indonesia yang baik dan santun. Jika pertanyaan dalam bahasa Inggris, jawablah dalam bahasa Inggris. Berikan jawaban yang informatif dan jelas."
            },
            {
                role: "assistant",
                content: "Halo! Saya AI ZanDKav yang didukung oleh DeepSeek AI. Bagaimana saya bisa membantu Anda hari ini?"
            }
        ];
        
        // DOM Elements
        const startBtn = document.getElementById('startBtn');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');
        const errorMessage = document.getElementById('errorMessage');
        const clearBtn = document.getElementById('clearBtn');
        
        // Event Listeners
        startBtn.addEventListener('click', startChat);
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        clearBtn.addEventListener('click', clearConversation);
        
        function startChat() {
            startBtn.style.display = 'none';
            document.querySelector('.description').style.display = 'none';
            chatContainer.style.display = 'block';
            userInput.focus();
        }
        
        async function sendMessage() {
            const message = userInput.value.trim();
            
            if (message) {
                // Clear previous error
                errorMessage.style.display = 'none';
                errorMessage.textContent = '';
                
                // Display user message
                displayMessage(message, 'user');
                
                // Add to conversation history
                conversationHistory.push({
                    role: "user",
                    content: message
                });
                
                // Clear input and disable during processing
                userInput.value = '';
                userInput.disabled = true;
                sendBtn.disabled = true;
                
                // Show typing indicator
                typingIndicator.style.display = 'block';
                
                try {
                    // Get AI response
                    const aiResponse = await getDeepSeekResponse(conversationHistory);
                    
                    // Add to conversation history
                    conversationHistory.push({
                        role: "assistant",
                        content: aiResponse
                    });
                    
                    // Display AI response
                    displayMessage(aiResponse, 'ai');
                    
                } catch (error) {
                    console.error('Error:', error);
                    errorMessage.textContent = 'Terjadi kesalahan: ' + (error.message || 'Silakan coba lagi');
                    errorMessage.style.display = 'block';
                    
                    // Display fallback message
                    const fallbackMessage = "Maaf, saya mengalami kesalahan teknis. Silakan coba lagi nanti atau periksa koneksi internet Anda.";
                    displayMessage(fallbackMessage, 'ai');
                    
                } finally {
                    // Reset UI states
                    typingIndicator.style.display = 'none';
                    userInput.disabled = false;
                    sendBtn.disabled = false;
                    userInput.focus();
                    
                    // Limit conversation history to prevent too large requests
                    if (conversationHistory.length > 10) {
                        conversationHistory = conversationHistory.slice(-10);
                        // Ensure system message is always first
                        if (conversationHistory[0].role !== "system") {
                            conversationHistory.unshift({
                                role: "system",
                                content: "Anda adalah AI ZanDKav..."
                            });
                        }
                    }
                }
            }
        }
        
        async function getDeepSeekResponse(messages) {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${API_KEY}`
                },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: messages,
                    temperature: 0.7,
                    max_tokens: 1000
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                console.error("API Error:", errorData);
                throw new Error(`Gagal memproses permintaan (Status: ${response.status})`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content;
        }
        
        function displayMessage(content, sender) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}-message`;
            messageElement.textContent = content;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function clearConversation() {
            // Reset conversation history
            conversationHistory = [
                {
                    role: "system",
                    content: "Anda adalah AI ZanDKav, asisten AI yang ramah dan membantu. Gunakan bahasa Indonesia yang baik dan santun. Jika pertanyaan dalam bahasa Inggris, jawablah dalam bahasa Inggris. Berikan jawaban yang informatif dan jelas."
                },
                {
                    role: "assistant",
                    content: "Percakapan telah direset. Halo lagi! Ada yang bisa saya bantu?"
                }
            ];
            
            // Clear chat messages
            chatMessages.innerHTML = '';
            displayMessage("Percakapan telah direset. Halo lagi! Ada yang bisa saya bantu?", 'ai');
            
            // Clear any errors
            errorMessage.style.display = 'none';
            errorMessage.textContent = '';
        }
    </script>
</body>
</html>
